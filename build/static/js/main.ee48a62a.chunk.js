(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),a=t(6),o=t(3),u=t(2),i=t(0),l=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,r=e.newNumber,a=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("p",{children:["name:",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("p",{children:["number:",Object(i.jsx)("input",{value:r,onChange:a})]}),Object(i.jsx)("button",{type:"submit",children:"add"})]})},d=function(e){var n=e.persons,t=e.newFilter,c=e.deletePerson,r=n.filter((function(e){return e.name.toLowerCase().includes(t)})),a=function(e){var n=e.name,t=e.id,c=e.deletePerson;return Object(i.jsx)("button",{onClick:function(){return o({name:n,id:t,deletePerson:c})},children:"delete"})},o=function(e){var n=e.name,t=e.id,c=e.deletePerson;window.confirm("Delete ".concat(n,"?"))&&c(t)};return r.map((function(e){return Object(i.jsxs)("div",{children:[e.name," ",e.number," ",Object(i.jsx)(a,{name:e.name,id:e.id,deletePerson:c})]},e.id)}))},s=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(i.jsx)("form",{children:Object(i.jsxs)("p",{children:["filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})})},f=t(4),b=t.n(f),j="/api/persons",h=function(){return b.a.get(j).then((function(e){return e.data}))},m=function(e){return b.a.post(j,e).then((function(e){return e.data}))},O=function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return b.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},g=(t(39),function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),f=Object(o.a)(r,2),b=f[0],j=f[1],g=Object(u.useState)(""),v=Object(o.a)(g,2),w=v[0],x=v[1],C=Object(u.useState)(""),N=Object(o.a)(C,2),P=N[0],S=N[1],y=Object(u.useState)(null),F=Object(o.a)(y,2),k=F[0],D=F[1],E=Object(u.useState)("add"),I=Object(o.a)(E,2),J=I[0],L=I[1];Object(u.useEffect)((function(){console.log("effect"),h().then((function(e){console.log("promise fulfilled"),c(e)}))}),[]),console.log("render",t.length,"persons"),console.log(t);var A=function(){setTimeout((function(){D(null)}),5e3)},B=function(e){var n=e.message,t=e.errorStyle;return null===n?null:Object(i.jsx)("div",{className:t,children:n})};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(B,{message:k,errorStyle:J}),Object(i.jsx)(s,{newFilter:P,handleFilterChange:function(e){console.log(e.target.value,P),S(e.target.value.toLowerCase())}}),Object(i.jsx)("h3",{children:"add a new"}),Object(i.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:b,number:w},r=t.map((function(e){return e.name})),o=t.find((function(e){return e.name===b}));if(r.includes(b)){if(window.confirm("".concat(b," is already added to phonebook, replace the old number (").concat(o.number,") with a new one (").concat(w,")?"))){var u=o.id,i=Object(a.a)(Object(a.a)({},o),{},{number:w});p(u,i).then((function(){c(t.map((function(e){return e.id!==u?e:i}))),L("update"),D("Updated ".concat(b," with new number ").concat(w)),A()}))}}else m(n).then((function(e){c(t.concat(e))})),L("add"),D("Added ".concat(b," with number ").concat(w)),A();j(""),x("")},newName:b,handleNameChange:function(e){console.log(e.target.value,b),j(e.target.value)},newNumber:w,handleNumberChange:function(e){console.log(e.target.value,w),x(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{persons:t,newFilter:P,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));O(e).then((function(){c(t.filter((function(n){return n.id!==e})))})).catch((function(e){L("delete"),D("Information of ".concat(n.name," has already been removed from server")),c(t.filter((function(e){return e.id!==n.id}))),A()})),L("delete"),D("Deleted ".concat(n.name)),A()}})]})});r.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ee48a62a.chunk.js.map