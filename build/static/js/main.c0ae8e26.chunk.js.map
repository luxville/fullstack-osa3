{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/persons.js","App.js","index.js"],"names":["PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Persons","persons","newFilter","deletePerson","filter","person","name","toLowerCase","includes","Button","id","onClick","confirmDelete","window","confirm","map","number","Filter","handleFilterChange","baseUrl","axios","get","then","response","data","newObject","post","delete","put","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","errorMessage","setErrorMessage","errorStyle","setErrorStyle","names","useEffect","console","log","personsService","initialPersons","length","handleErrorMessage","setTimeout","Notification","message","className","event","target","preventDefault","personObject","find","updatedPerson","catch","error","n","returnedPersons","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c0ae8e26.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\n  return (\n    <form onSubmit={addPerson}>\n        <p>name: \n          <input\n            value={newName}\n            onChange={handleNameChange}\n          />\n        </p>\n        <p>number:\n          <input\n            value={newNumber}\n            onChange={handleNumberChange}\n          />\n        </p>\n        <button type=\"submit\">add</button>\n      </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({ persons, newFilter, deletePerson }) => {\n  //const names = persons.map(name => name.name)\n  const filter = persons.filter(person => person.name.toLowerCase().includes(newFilter))\n  \n  const personsToShow = () => (\n    filter.map(person =>\n      <div key={person.id}>\n        {person.name} {person.number} <Button \n          name={person.name}\n          id={person.id}\n          deletePerson={deletePerson} \n        />\n      </div>\n    )\n  )\n\n  const Button = ({ name, id, deletePerson }) => {\n    return (\n      <button onClick={() => confirmDelete({name, id, deletePerson})}>delete</button>\n    )\n  }\n\n  const confirmDelete = ({ name, id, deletePerson }) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      deletePerson(id)\n    }\n  }\n\n  return (\n    personsToShow()\n  )\n}\n\nexport default Persons","import React from 'react'\n\nconst Filter = ({ newFilter, handleFilterChange }) => {\n  return (\n    <form>\n      <p>filter shown with <input\n          value={newFilter}\n          onChange={handleFilterChange}\n        />\n      </p>\n    </form>\n  )\n}\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default {\n    getAll, create, deletePerson, update\n}","import React, { useState, useEffect } from 'react'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport personsService from './services/persons'\nimport './index.css'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ errorStyle, setErrorStyle ] = useState('add')\n\n  const names = persons.map(person => person.name)\n\n  useEffect(() => {\n    console.log('effect')\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        console.log('promise fulfilled')\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n  console.log(persons)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    \n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if(names.includes(newName)) {\n      const person = persons.find(person => person.name === newName)\n      const id = person.id\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number (${person.number}) with a new one (${newNumber})?`)) {\n        personsService\n        .update(id, personObject)\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id !== id ? person : updatedPerson))\n          })\n          .catch(error => {\n            console.log(person, error)\n            setErrorStyle('delete')\n            setErrorMessage(`Information of ${person.name} has already been removed from server`)\n            setPersons(persons.filter(n => n.id !== person.id))\n            handleErrorMessage()\n          })\n          setErrorStyle('update')\n          setErrorMessage(`Updated ${newName} with new number ${newNumber}`)\n          handleErrorMessage()\n        }\n    } else {\n      personsService\n        .create(personObject)\n        .then(returnedPersons => {\n          setPersons(persons.concat(returnedPersons))\n        })\n        .catch(error => {\n          console.log(error)\n          setErrorStyle('delete')\n          setErrorMessage(error)\n          handleErrorMessage()\n          setErrorMessage(error)\n          handleErrorMessage()\n        })\n        setErrorStyle('add')\n        setErrorMessage(\n          `Added ${newName} with number ${newNumber}`\n        )\n        handleErrorMessage()\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value, newName)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value, newNumber)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value, newFilter)\n    setNewFilter(event.target.value.toLowerCase())\n  }\n\n  const handleErrorMessage = () => {\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  }\n\n  const deletePerson = (id) => {\n    const person = persons.find(person => person.id === id)\n    personsService\n      .deletePerson(id)\n    setErrorStyle('delete')\n    setErrorMessage(\n      `Deleted ${person.name}`\n    )\n    handleErrorMessage()\n    setPersons(persons.filter(person => person.id !== id))\n  }\n\n  const Notification = ({ message, errorStyle }) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className={errorStyle}>\n        {message}\n      </div>)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} errorStyle={errorStyle} />\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <Persons persons={persons} newFilter={newFilter} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'))\n"],"sourceRoot":""}