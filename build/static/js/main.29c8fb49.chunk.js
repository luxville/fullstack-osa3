(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),c=t.n(r),a=t(6),o=t(3),u=t(2),i=t(0),l=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("p",{children:["name:",Object(i.jsx)("input",{value:t,onChange:r})]}),Object(i.jsxs)("p",{children:["number:",Object(i.jsx)("input",{value:c,onChange:a})]}),Object(i.jsx)("button",{type:"submit",children:"add"})]})},d=function(e){var n=e.persons,t=e.newFilter,r=e.deletePerson,c=n.filter((function(e){return e.name.toLowerCase().includes(t)})),a=function(e){var n=e.name,t=e.id,r=e.deletePerson;return Object(i.jsx)("button",{onClick:function(){return o({name:n,id:t,deletePerson:r})},children:"delete"})},o=function(e){var n=e.name,t=e.id,r=e.deletePerson;window.confirm("Delete ".concat(n,"?"))&&r(t)};return c.map((function(e){return Object(i.jsxs)("div",{children:[e.name," ",e.number," ",Object(i.jsx)(a,{name:e.name,id:e.id,deletePerson:r})]},e.id)}))},s=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(i.jsx)("form",{children:Object(i.jsxs)("p",{children:["filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})})},f=t(4),b=t.n(f),h="/api/persons",j=function(){return b.a.get(h).then((function(e){return e.data}))},m=function(e){return b.a.post(h,e).then((function(e){return e.data}))},O=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},g=(t(39),function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),f=Object(o.a)(c,2),b=f[0],h=f[1],g=Object(u.useState)(""),v=Object(o.a)(g,2),w=v[0],x=v[1],C=Object(u.useState)(""),N=Object(o.a)(C,2),P=N[0],S=N[1],y=Object(u.useState)(null),F=Object(o.a)(y,2),k=F[0],D=F[1],E=Object(u.useState)("add"),I=Object(o.a)(E,2),J=I[0],L=I[1];Object(u.useEffect)((function(){console.log("effect"),j().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]),console.log("render",t.length,"persons"),console.log(t);var A=function(){setTimeout((function(){D(null)}),5e3)},B=function(){return!(b.trim().length<1||w.trim().length<1)||(alert("both name and number should be given"),!1)},T=function(e){var n=e.message,t=e.errorStyle;return null===n?null:Object(i.jsx)("div",{className:t,children:n})};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(T,{message:k,errorStyle:J}),Object(i.jsx)(s,{newFilter:P,handleFilterChange:function(e){console.log(e.target.value,P),S(e.target.value.toLowerCase())}}),Object(i.jsx)("h3",{children:"add a new"}),Object(i.jsx)(l,{addPerson:function(e){if(e.preventDefault(),B()){var n=t.find((function(e){return e.name===b}));if(n)if(window.confirm("".concat(b," is already added to phonebook, replace the old number (").concat(n.number,") with a new one (").concat(w,")?"))){var c=Object(a.a)(Object(a.a)({},n),{},{number:w});p(n.id,c).then((function(e){r(t.map((function(n){return n.id!==e.id?n:c}))),h(""),x(""),L("update"),D('Updated "'.concat(b,'" with new number "').concat(w,'"')),A()})).catch((function(e){L("delete"),D(e.response.data.error),A()}))}else h(""),x("");else m({name:b,number:w}).then((function(e){r(t.concat(e)),h(""),x(""),L("add"),D("Added ".concat(b," with new number ").concat(w)),A()})).catch((function(e){L("delete"),D(e.response.data.error),A()}))}},newName:b,handleNameChange:function(e){console.log(e.target.value,b),h(e.target.value)},newNumber:w,handleNumberChange:function(e){console.log(e.target.value,w),x(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{persons:t,newFilter:P,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));O(e).then((function(){r(t.filter((function(n){return n.id!==e})))})).catch((function(e){L("delete"),D("Information of ".concat(n.name," has already been removed from server")),r(t.filter((function(e){return e.id!==n.id}))),A()})),L("delete"),D("Deleted ".concat(n.name)),A()}})]})});c.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.29c8fb49.chunk.js.map