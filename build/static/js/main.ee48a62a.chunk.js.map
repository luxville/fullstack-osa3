{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/persons.js","App.js","index.js"],"names":["PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Persons","persons","newFilter","deletePerson","filter","person","name","toLowerCase","includes","Button","id","onClick","confirmDelete","window","confirm","map","number","Filter","handleFilterChange","baseUrl","axios","get","then","response","data","newObject","post","delete","put","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","errorMessage","setErrorMessage","errorStyle","setErrorStyle","useEffect","console","log","personsService","initialPersons","length","handleErrorMessage","setTimeout","Notification","message","className","event","target","preventDefault","personObject","names","personToModify","find","modifiedPerson","returnedPersons","concat","personToDelete","catch","error","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ee48a62a.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\n  return (\n    <form onSubmit={addPerson}>\n        <p>name: \n          <input\n            value={newName}\n            onChange={handleNameChange}\n          />\n        </p>\n        <p>number:\n          <input\n            value={newNumber}\n            onChange={handleNumberChange}\n          />\n        </p>\n        <button type=\"submit\">add</button>\n      </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({ persons, newFilter, deletePerson }) => {\n  //const names = persons.map(name => name.name)\n  const filter = persons.filter(person => person.name.toLowerCase().includes(newFilter))\n  \n  const personsToShow = () => (\n    filter.map(person =>\n      <div key={person.id}>\n        {person.name} {person.number} <Button \n          name={person.name}\n          id={person.id}\n          deletePerson={deletePerson} \n        />\n      </div>\n    )\n  )\n\n  const Button = ({ name, id, deletePerson }) => {\n    return (\n      <button onClick={() => confirmDelete({name, id, deletePerson})}>delete</button>\n    )\n  }\n\n  const confirmDelete = ({ name, id, deletePerson }) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      deletePerson(id)\n    }\n  }\n\n  return (\n    personsToShow()\n  )\n}\n\nexport default Persons","import React from 'react'\n\nconst Filter = ({ newFilter, handleFilterChange }) => {\n  return (\n    <form>\n      <p>filter shown with <input\n          value={newFilter}\n          onChange={handleFilterChange}\n        />\n      </p>\n    </form>\n  )\n}\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default {\n    getAll, create, deletePerson, update\n}","import React, { useState, useEffect } from 'react'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport personsService from './services/persons'\nimport './index.css'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ errorStyle, setErrorStyle ] = useState('add')\n\n  useEffect(() => {\n    console.log('effect')\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        console.log('promise fulfilled')\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n  console.log(persons)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const names = persons.map(person => person.name)\n    const personToModify = persons.find(person => person.name === newName)\n\n    if (names.includes(newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number (${personToModify.number}) with a new one (${newNumber})?`)) {\n        const id = personToModify.id\n        const modifiedPerson = { ...personToModify, number: newNumber }\n        personsService\n        .update(id, modifiedPerson)\n        .then(() => {\n          setPersons(persons.map(person => person.id !== id ? person : modifiedPerson))\n          setErrorStyle('update')\n          setErrorMessage(`Updated ${newName} with new number ${newNumber}`)\n          handleErrorMessage()\n        })\n        /*.catch(error => {\n          setErrorStyle('delete')\n          setErrorMessage(`Information of ${person.name} has already been removed from server`)\n          setPersons(persons.filter(n => n.id !== personToModify.id))\n          handleErrorMessage()\n        })*/\n        \n      }\n    } else {\n      personsService\n        .create(personObject)\n        .then(returnedPersons => {\n          setPersons(persons.concat(returnedPersons))\n        })\n        /*.catch(error => {\n          console.log(error)\n          setErrorStyle('delete')\n          setErrorMessage(error)\n          handleErrorMessage()\n        })*/\n        setErrorStyle('add')\n        setErrorMessage(`Added ${newName} with number ${newNumber}`)\n        handleErrorMessage()\n    } /*else {\n      setErrorStyle('delete')\n      setErrorMessage('too short name or number')\n      handleErrorMessage()\n    }*/\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value, newName)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value, newNumber)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value, newFilter)\n    setNewFilter(event.target.value.toLowerCase())\n  }\n\n  const handleErrorMessage = () => {\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  }\n\n  const deletePerson = (id) => {\n    const personToDelete = persons.find(person => person.id === id)\n    personsService\n      .deletePerson(id)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== id))\n      })\n      .catch(error => {\n        setErrorStyle('delete')\n        setErrorMessage(`Information of ${personToDelete.name} has already been removed from server`)\n        setPersons(persons.filter(n => n.id !== personToDelete.id))\n        handleErrorMessage()\n      })\n    setErrorStyle('delete')\n    setErrorMessage(\n      `Deleted ${personToDelete.name}`\n    )\n    handleErrorMessage()\n  }\n\n  const Notification = ({ message, errorStyle }) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className={errorStyle}>\n        {message}\n      </div>)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} errorStyle={errorStyle} />\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <Persons persons={persons} newFilter={newFilter} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'))\n"],"sourceRoot":""}